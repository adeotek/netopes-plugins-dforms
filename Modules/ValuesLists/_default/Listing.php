<?php
	$ctrl_params = array(
		'module'=>$this->name,
		'method'=>$this->GetCurrentMethod(),
		'persistent_state'=>TRUE,
		'target'=>'listing-content',
		'alternate_row_collor'=>TRUE,
		'scrollable'=>FALSE,
		'with_filter'=>TRUE,
		'with_pagination'=>TRUE,
		'sortby'=>array('column'=>'name','direction'=>'asc'),
		'qsearch'=>'for_text',
		'data_source'=>'Components\DForms\ValuesLists',
		'ds_method'=>'GetItems',
		'ds_params'=>array('for_id'=>NULL,'for_state'=>NULL,'for_text'=>NULL),
		'auto_load_data'=>TRUE,
		'columns'=>array(
			'code'=>array(
				'db_field'=>'ltype',
				'data_type'=>'string',
				'type'=>'value',
				'halign'=>'left',
				'label'=>Translate::GetLabel('code'),
				'sortable'=>TRUE,
				'filterable'=>TRUE,
			),
			'name'=>array(
				'db_field'=>'name',
				'data_type'=>'string',
				'type'=>'value',
				'halign'=>'left',
				'label'=>Translate::GetLabel('name'),
				'sortable'=>TRUE,
				'filterable'=>TRUE,
			),
			'vcount'=>array(
				'width'=>'120',
				'db_field'=>'vcount',
				'data_type'=>'numeric',
				'type'=>'value',
				'format'=>'integer',
				'halign'=>'center',
				'label'=>Translate::GetLabel('values_no'),
				'sortable'=>TRUE,
				'filterable'=>TRUE,
			),
			'state'=>array(
				'width'=>'80',
				'db_field'=>'state',
				'data_type'=>'numeric',
				'type'=>'checkbox',
				'label'=>Translate::GetLabel('active'),
				'sortable'=>TRUE,
				'filterable'=>TRUE,
				'filter_type'=>'combobox',
				'show_filter_cond_type'=>FALSE,
				'filter_params'=>array('valfield'=>'id','displayfield'=>'name','selectedvalue'=>NULL),
				'filter_data_call'=>array(
					'data_source'=>'_Custom\Offline',
					'ds_method'=>'GetGenericArrays',
					'ds_params'=>array('type'=>'active'),
				),
			),
			'create_date'=>array(
				'width'=>'130',
				'db_field'=>'create_date',
				'data_type'=>'datetime',
				'type'=>'value',
				'halign'=>'center',
				'format'=>'datetime',
				'label'=>Translate::GetLabel('create_date'),
				'sortable'=>TRUE,
				'filterable'=>FALSE,
			),
			'end_actions'=>array(
				'type'=>'actions',
				'visual_count'=>3,
				'actions'=>array(
					array(
						'type'=>'DivButton',
						'command_string'=>"AjaxRequest('Components\DForms\ValuesLists\ValuesLists','ShowEditForm','id'|{{id}})->main-content",
						'params'=>array('tagid'=>'df_list_edit_btn','tooltip'=>Translate::GetButton('edit'),'class'=>'btn btn-primary btn-xxs','icon'=>'fa fa-pencil-square-o'),
					),
					array(
						'type'=>'DivButton',
						'command_string'=>"AjaxRequest('Components\DForms\ValuesLists\ValuesLists','ValuesListing','id_list'|'{{id}}','modal')->modal",
						'params'=>array('tagid'=>'df_list_det_btn','tooltip'=>Translate::GetButton('values'),'class'=>'btn btn-info btn-xxs','icon'=>'fa fa-list','conditions'=>array(array('field'=>'vcount','type'=>'>','value'=>0))),
					),
					array(
						'type'=>'DivButton',
						'command_string'=>"AjaxRequest('Components\DForms\ValuesLists\ValuesLists','DeleteRecord','id'|{{id}})->errors",
						'params'=>array('tagid'=>'df_list_delete_btn','tooltip'=>Translate::GetButton('delete'),'class'=>'btn btn-danger btn-xxs pull-right','icon'=>'fa fa-times','confirm_text'=>Translate::GetMessage('confirm_delete')),
					),
				),
			),
		),
	);
?>